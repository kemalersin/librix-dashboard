!function(t){"use strict";var e={},a={},i=function(e,a){a&&(n.unslider("animate:first"),c.rows().deselect()),t("html, body").stop().animate({scrollTop:t(e).offset().top-t(".navbar-fixed-top").height()},1250,"easeInOutExpo")},s=function(e){t(".amcharts-chart-div a").remove()},l=function(t){i("#institutions",!0),c.columns(1).search(t.mapObject.title).draw()},o=function(t){i("#institutions",!0),c.columns(1).search("").draw()},n=t("#institutions").unslider({arrows:!1,autoplay:!1,keys:!1,nav:!1});t("#charts").unslider(),n.on("unslider.change",function(e,a,i){2===a&&setTimeout(function(){t("img.lazy.collapse").fadeIn("slow")},500)}),t("body").scrollspy({target:".navbar-fixed-top",offset:51}),window.sr=ScrollReveal(),sr.reveal(".sr-contact",{duration:600,scale:.3,distance:"0px"},300),t("a.page-scroll").click(function(e){e.preventDefault(),i(t(this).attr("href"))}),t(".navbar-collapse ul li a:not(.dropdown-toggle)").click(function(){t(".navbar-collapse > ul > li.active").removeClass("active"),t(this).parent("li").addClass("active"),t(".navbar-toggle:visible").click()}),t(document).on("click","a.slide-back",function(e){var a=t(this);e.preventDefault(),n.unslider("prev"),a.hasClass("to-institutions")?c.rows().deselect():a.hasClass("to-activities")&&r.rows().deselect()}).on("click",".thumb",function(){t(".thumb.selected").removeClass("selected"),t(this).addClass("selected"),t(".main-img").find("img").hide().attr("src",this.src).fadeIn(1e3)});var r,c=t("#institutions-table").DataTable({ajax:"/institutions",pageLength:25,processing:!0,scrollX:!0,select:{style:"single",blurable:!0,info:!1,className:"row-selected"},columns:[{data:"Kod",width:"10%"},{data:"Il",width:"10%"},{data:"Ilce",width:"10%"},{data:"Tanim",width:"30%"},{data:"ToplamEtkinlik",width:"13%",type:"html-num",className:"text-center"},{data:"GerceklesenEtkinlik",width:"14%",type:"html-num",className:"text-center"},{data:"KalanEtkinlik",width:"13%",type:"html-num",className:"text-center"}],order:[[1,"asc"],[2,"asc"]],columnDefs:[{targets:[1],orderData:[1,2]}],language:{url:"/js/datatables/Turkish.json"}});c.on("select",function(e,a,i,s){t.map(a.rows({selected:!0}).data(),function(e){var i="undefined"==typeof r;i||r.destroy(),r=t("#activities-table").DataTable({ajax:"/activities/"+e.Kod,pageLength:a.page.len(),destroy:!0,processing:!0,scrollX:!0,select:{style:"single",blurable:!0,info:!1,className:"row-selected"},dom:'<"row"<"dt-info col-sm-6"><"col-sm-6 hidden-xs"f>>rt<"row"<"col-sm-6"i><"col-sm-6"p>>',columns:[{data:"BaslangicTarihi",width:"15%",type:"date"},{data:"BitisTarihi",width:"15%",type:"date"},{data:"Konu",width:"45%"},{data:"IlgiliKisi",width:"20%"},{data:"Tamamlandi",width:"15%"}],columnDefs:[{targets:[0,1],render:function(t,e,a,i){return moment(t).format("DD.MM.Y")}},{targets:4,render:function(t,e,a,i){return t===!0?'<i class="fa fa-check-square-o text-success"></i> Tamamlandı':'<i class="fa fa-square-o text-danger"></i> Tamamlanmadı'}}],order:[[0,"asc"]],language:{url:"/js/datatables/Turkish.json"}}),r.one("draw",function(){t(".container.activities").find(".dt-info").html('<a href class="slide-back to-institutions"><i class="fa fa-chevron-left" aria-hidden="true"></i></a> <span class="text-primary"><strong>'+e.Tanim+" Etkinlikleri</strong></span>"),n.unslider("next")}),i&&r.on("select",function(e,a,i,s){t.map(a.rows({selected:!0}).data(),function(e){t.get("/activity/"+e.Id,function(e){var a=t(".container.activity"),i=a.find(".images"),s=a.find(".info"),l=e.BaslangicTarihi,o=e.BitisTarihi,r=moment(o).diff(l,"d");0===r&&r++,a.find(".subject").text(e.Konu),a.find(".date span").text(moment(l).format("DD.MM.Y")+" ("+r+" gün)"),a.find(".summary").html("<strong>"+e.Ozet+"</strong>"),a.find(".description").html('<div class="text">'+e.Aciklama+"</div>"),a.find(".text").mCustomScrollbar({theme:"inset-dark",scrollButtons:{enable:!0},advanced:{updateOnContentResize:!0}}),i.find(".thumbnails").html(""),"undefined"==typeof e.Gorseller||0===e.Gorseller.length?(i.hide(),s.removeClass("col-sm-6").addClass("col-sm-12")):(i.show(),s.removeClass("col-sm-12").addClass("col-sm-6"),i.find(".main-img").html('<img class="lazy collapse" src="'+e.Gorseller[0]+'" />'),e.Gorseller.length>1?(i.find(".row:first-child").height(365),i.find(".row:last-child").show(),e.Gorseller.forEach(function(t){i.find(".thumbnails").append('<img class="lazy thumb collapse" src="'+t+'" />')}),i.find(".thumb:first-child").addClass("selected")):(i.find(".row:first-child").height(436),i.find(".row:last-child").hide())),n.unslider("next")})})})})}),AmCharts.makeChart("map",{type:"map",autoDisplay:!0,theme:"light",colorSteps:10,dataProvider:{map:"turkeyHigh",getAreasFromMap:!0},valueLegend:{right:10,minValue:"Hiç Yok",maxValue:"Çok Fazla",color:"#fff"},areasSettings:{autoZoom:!1,selectable:!0,balloonText:"[[title]]:<strong>[[value]]</strong> ([[percent]]%)"},dataLoader:{url:"/mapdata",format:"json"},listeners:[{event:"rendered",method:s},{event:"clickMapObject",method:l},{event:"homeButtonClicked",method:o}]}),a.chart1={theme:"light",type:"serial",startDuration:2,dataProvider:[{country:"İstanbul",visits:4025,color:"#FF0F00"},{country:"Ankara",visits:3209,color:"#FF9E01"},{country:"İzmir",visits:2322,color:"#FCD202"},{country:"Adana",visits:1522,color:"#F8FF01"},{country:"Eskişehir",visits:1214,color:"#B0DE09"},{country:"Konya",visits:984,color:"#04D215"},{country:"Bursa",visits:711,color:"#0D8ECF"},{country:"Kocaeli",visits:665,color:"#0D52D1"},{country:"Antalya",visits:580,color:"#2A0CD0"},{country:"Gaziantep",visits:443,color:"#8A0CCF"},{country:"Trabzon",visits:225,color:"#8A0CCF"}],valueAxes:[{position:"left",title:"Etkinlikler"}],graphs:[{balloonText:"[[category]]: <b>[[value]]</b>",fillColorsField:"color",fillAlphas:1,lineAlpha:.1,type:"column",valueField:"visits"}],depth3D:20,angle:30,chartCursor:{categoryBalloonEnabled:!1,cursorAlpha:0,zoomable:!1},categoryField:"country",categoryAxis:{gridPosition:"start",labelRotation:45},"export":{enabled:!0}},t(window).scroll(function(){for(var i in a)if("undefined"==typeof e[i]){var s=t("#"+i).offset().top,l=t("#"+i).outerHeight(),o=t(window).height(),n=t(this).scrollTop();n>s+l-o&&(e[i]=AmCharts.makeChart(i,a[i]))}})}(jQuery);